name: "fastapi-app-filebeat"
logging.metrics.enabled: false
xpack.security.enabled: false
xpack.monitoring.enabled: false
setup.ilm.enabled: false
setup.template.enabled: false

filebeat.inputs:
- type: log
  scan_frequency: 1s
  enabled: true
  paths:
      - /code/joke-service/sqlite-logs/joke*
    # - /code/joke-service/log.db # TODO need to be the DB
    # - /code/logs/fastapi # TODO maybe need to write to a file as well
  fields:
    - service: joke-service
  fields_under_root: true

output.elasticsearch:
  hosts: ["elasticsearch:9200"]
  index: "joke-service"